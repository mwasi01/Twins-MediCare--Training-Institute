<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Twins MedCare Training Institute</title>
    <link rel="icon" href="images/Twins png.png" type="image/png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@100;200;300;400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Poppins', sans-serif;
        }

        body {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 20px;
            color: #333;
            line-height: 1.6;
        }

        h1, h2, h3, h4 {
            font-weight: 600;
            line-height: 1.2;
        }

        a {
            text-decoration: none;
            color: #4CAF50;
            transition: all 0.3s ease;
        }

        a:hover {
            color: #45a049;
        }

        /* ===== LOGIN CONTAINER ===== */
        .login-container {
            display: flex;
            max-width: 1200px;
            width: 100%;
            min-height: 80vh;
            background: white;
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 25px 80px rgba(0, 0, 0, 0.2);
        }

        /* Left Side - Welcome */
        .login-left {
            flex: 1;
            background: linear-gradient(135deg, #1a237e 0%, #283593 50%, #3949ab 100%);
            color: white;
            padding: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            position: relative;
            overflow: hidden;
        }

        .login-left::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('https://images.unsplash.com/photo-1559757148-5c350d0d3c56?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80') center/cover;
            opacity: 0.1;
        }

        .brand-logo {
            display: flex;
            align-items: center;
            gap: 15px;
            margin-bottom: 40px;
            position: relative;
            z-index: 1;
        }

        .brand-logo img {
            width: 60px;
            height: auto;
        }

        .brand-name {
            font-size: 1.8rem;
            font-weight: 700;
        }

        .login-left h1 {
            font-size: 2.5rem;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .login-left p {
            font-size: 1.1rem;
            opacity: 0.9;
            margin-bottom: 30px;
            position: relative;
            z-index: 1;
        }

        .features-list {
            list-style: none;
            margin-top: 40px;
            position: relative;
            z-index: 1;
        }

        .features-list li {
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            font-size: 1rem;
        }

        .features-list i {
            width: 30px;
            height: 30px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Right Side - Login Form */
        .login-right {
            flex: 1;
            padding: 50px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        /* Login Options Tabs */
        .login-tabs {
            display: flex;
            border-bottom: 2px solid #e0e0e0;
            margin-bottom: 40px;
        }

        .login-tab {
            flex: 1;
            padding: 15px;
            text-align: center;
            font-weight: 600;
            font-size: 1rem;
            color: #666;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 3px solid transparent;
        }

        .login-tab:hover {
            color: #4CAF50;
        }

        .login-tab.active {
            color: #4CAF50;
            border-bottom-color: #4CAF50;
        }

        .login-tab i {
            margin-right: 8px;
            font-size: 1.1rem;
        }

        /* Form Header */
        .form-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .form-header h2 {
            font-size: 2.2rem;
            color: #1a237e;
            margin-bottom: 10px;
        }

        .form-header p {
            color: #666;
            font-size: 1rem;
        }

        /* Form Styles */
        .login-form {
            max-width: 400px;
            margin: 0 auto;
            width: 100%;
        }

        .form-group {
            margin-bottom: 25px;
            position: relative;
        }

        .form-label {
            display: block;
            margin-bottom: 8px;
            font-weight: 500;
            color: #333;
            font-size: 0.95rem;
        }

        .form-label span {
            color: #f44336;
        }

        .form-input {
            width: 100%;
            padding: 15px 45px 15px 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
            background: #f9f9f9;
        }

        .form-input:focus {
            outline: none;
            border-color: #4CAF50;
            background: white;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .form-input.error {
            border-color: #f44336;
            background: #fff5f5;
        }

        .form-input.success {
            border-color: #4CAF50;
        }

        .error-message {
            color: #f44336;
            font-size: 0.85rem;
            margin-top: 5px;
            display: none;
        }

        /* Input Icons */
        .input-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #666;
            font-size: 1.1rem;
        }

        /* Password Toggle */
        .password-input {
            position: relative;
        }

        .toggle-password {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            background: none;
            border: none;
            color: #666;
            cursor: pointer;
            font-size: 1.1rem;
            z-index: 2;
        }

        .toggle-password:hover {
            color: #333;
        }

        /* Remember Me & Forgot Password */
        .form-options {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
        }

        .remember-me {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .remember-me input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .remember-me label {
            color: #666;
            font-size: 0.95rem;
            cursor: pointer;
        }

        .forgot-password {
            color: #4CAF50;
            font-size: 0.95rem;
            font-weight: 500;
        }

        .forgot-password:hover {
            color: #45a049;
            text-decoration: underline;
        }

        /* Form Actions */
        .form-actions {
            display: flex;
            flex-direction: column;
            gap: 20px;
            margin-top: 40px;
        }

        .btn {
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            box-shadow: 0 5px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(76, 175, 80, 0.4);
        }

        .btn-primary:active {
            transform: translateY(-1px);
        }

        .btn-secondary {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-secondary:hover {
            border-color: #4CAF50;
            color: #4CAF50;
            transform: translateY(-2px);
        }

        .btn-google {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-google:hover {
            border-color: #db4437;
            color: #db4437;
            transform: translateY(-2px);
        }

        .btn-google i {
            color: #db4437;
        }

        .btn-microsoft {
            background: white;
            color: #333;
            border: 2px solid #e0e0e0;
        }

        .btn-microsoft:hover {
            border-color: #00a4ef;
            color: #00a4ef;
            transform: translateY(-2px);
        }

        .btn-microsoft i {
            color: #00a4ef;
        }

        /* Social Login */
        .social-login {
            margin: 40px 0;
        }

        .divider {
            display: flex;
            align-items: center;
            margin: 30px 0;
            color: #666;
        }

        .divider::before,
        .divider::after {
            content: '';
            flex: 1;
            height: 1px;
            background: #e0e0e0;
        }

        .divider span {
            padding: 0 15px;
            font-size: 0.9rem;
        }

        .social-buttons {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
        }

        /* Register Link */
        .register-link {
            text-align: center;
            margin-top: 30px;
            color: #666;
            font-size: 0.95rem;
        }

        /* Two-Factor Authentication */
        .two-factor-form {
            display: none;
            text-align: center;
        }

        .two-factor-form h3 {
            margin-bottom: 20px;
            color: #333;
        }

        .verification-code {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin: 30px 0;
        }

        .verification-code input {
            width: 50px;
            height: 60px;
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            background: #f9f9f9;
            transition: all 0.3s ease;
        }

        .verification-code input:focus {
            outline: none;
            border-color: #4CAF50;
            box-shadow: 0 0 0 3px rgba(76, 175, 80, 0.1);
        }

        .resend-code {
            color: #4CAF50;
            font-size: 0.9rem;
            cursor: pointer;
            margin-top: 15px;
        }

        .resend-code:hover {
            text-decoration: underline;
        }

        /* Success Message */
        .success-message {
            text-align: center;
            padding: 40px;
            display: none;
        }

        .success-icon {
            width: 80px;
            height: 80px;
            background: #4CAF50;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 30px;
            color: white;
            font-size: 35px;
            animation: bounce 1s ease infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Security Tips */
        .security-tips {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-top: 40px;
            border-left: 4px solid #4CAF50;
        }

        .security-tips h4 {
            color: #333;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .security-tips h4 i {
            color: #4CAF50;
        }

        .security-tips p {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.5;
        }

        /* Loading State */
        .loading {
            display: none;
            margin-top: 10px;
            text-align: center;
        }

        .loading-spinner {
            width: 20px;
            height: 20px;
            border: 3px solid #f3f3f3;
            border-top: 3px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            margin-right: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive Design */
        @media (max-width: 992px) {
            .login-container {
                flex-direction: column;
                max-width: 600px;
            }

            .login-left {
                padding: 30px;
                min-height: 300px;
            }

            .login-left h1 {
                font-size: 2rem;
            }

            .login-right {
                padding: 30px;
            }
        }

        @media (max-width: 576px) {
            body {
                padding: 10px;
            }

            .login-container {
                border-radius: 15px;
            }

            .login-left {
                padding: 20px;
            }

            .login-right {
                padding: 20px;
            }

            .form-header h2 {
                font-size: 1.8rem;
            }

            .form-input {
                padding: 12px 40px 12px 12px;
            }

            .btn {
                padding: 14px;
            }

            .social-buttons {
                grid-template-columns: 1fr;
            }

            .form-options {
                flex-direction: column;
                align-items: flex-start;
                gap: 15px;
            }

            .verification-code {
                gap: 5px;
            }

            .verification-code input {
                width: 40px;
                height: 50px;
            }
        }

        /* Login Form Variations */
        .login-content {
            display: block;
        }

        .student-login,
        .staff-login {
            display: none;
        }

        .student-login.active,
        .staff-login.active {
            display: block;
        }

        /* Quick Login Buttons */
        .quick-login {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-bottom: 30px;
        }

        .quick-login-btn {
            padding: 15px;
            background: #f8f9fa;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .quick-login-btn:hover {
            border-color: #4CAF50;
            background: #e8f5e9;
            transform: translateY(-3px);
        }

        .quick-login-btn.active {
            border-color: #4CAF50;
            background: #e8f5e9;
        }

        .quick-login-btn i {
            font-size: 24px;
            color: #4CAF50;
        }

        /* Guest Access */
        .guest-access {
            text-align: center;
            margin-top: 20px;
        }

        .guest-btn {
            background: transparent;
            border: none;
            color: #4CAF50;
            font-weight: 500;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .guest-btn:hover {
            text-decoration: underline;
        }
    </style>
</head>
<body>
    <div class="login-container">
        <!-- Left Side - Welcome -->
        <div class="login-left">
            <div class="brand-logo">
                <img src="images/Twins png.png" alt="Twins MedCare Logo">
                <div class="brand-name">TWINS MEDCARE</div>
            </div>
            <h1>Welcome Back!</h1>
            <p>Sign in to access your personalized dashboard, course materials, and connect with our healthcare community.</p>
            
            <ul class="features-list">
                <li><i class="fas fa-book-medical"></i> Access course materials</li>
                <li><i class="fas fa-tasks"></i> Submit assignments online</li>
                <li><i class="fas fa-chart-line"></i> Track your progress</li>
                <li><i class="fas fa-comments"></i> Connect with instructors</li>
                <li><i class="fas fa-calendar-alt"></i> View academic calendar</li>
            </ul>
        </div>

        <!-- Right Side - Login Form -->
        <div class="login-right">
            <!-- Login Tabs -->
            <div class="login-tabs">
                <div class="login-tab active" data-tab="general">
                    <i class="fas fa-sign-in-alt"></i> General Login
                </div>
                <div class="login-tab" data-tab="student">
                    <i class="fas fa-user-graduate"></i> Student Portal
                </div>
                <div class="login-tab" data-tab="staff">
                    <i class="fas fa-chalkboard-teacher"></i> Staff Portal
                </div>
            </div>

            <!-- Form Header -->
            <div class="form-header">
                <h2 id="loginTitle">Sign In to Your Account</h2>
                <p id="loginSubtitle">Enter your credentials to access the platform</p>
            </div>

            <!-- General Login Form -->
            <div class="login-content active" id="generalLogin">
                <form id="generalLoginForm" class="login-form">
                    <div class="form-group">
                        <label for="generalEmail" class="form-label">Email Address <span>*</span></label>
                        <div class="password-input">
                            <input type="email" id="generalEmail" name="email" class="form-input" placeholder="Enter your email address" required>
                            <i class="fas fa-envelope input-icon"></i>
                        </div>
                        <div class="error-message" id="generalEmailError">Please enter a valid email address</div>
                    </div>

                    <div class="form-group">
                        <label for="generalPassword" class="form-label">Password <span>*</span></label>
                        <div class="password-input">
                            <input type="password" id="generalPassword" name="password" class="form-input" placeholder="Enter your password" required>
                            <button type="button" class="toggle-password" data-target="generalPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="generalPasswordError">Password is required</div>
                    </div>

                    <div class="form-options">
                        <div class="remember-me">
                            <input type="checkbox" id="rememberMe" name="rememberMe">
                            <label for="rememberMe">Remember me</label>
                        </div>
                        <a href="forgot-password.html" class="forgot-password">Forgot Password?</a>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="generalLoginBtn">
                            Sign In <i class="fas fa-sign-in-alt"></i>
                        </button>
                    </div>

                    <div class="loading" id="generalLoading">
                        <div class="loading-spinner"></div>
                        Signing in...
                    </div>
                </form>
            </div>

            <!-- Student Login Form -->
            <div class="student-login" id="studentLogin">
                <div class="form-header">
                    <h3>Student Portal Access</h3>
                    <p>Use your student credentials to login</p>
                </div>

                <form id="studentLoginForm" class="login-form">
                    <div class="form-group">
                        <label for="studentId" class="form-label">Student ID <span>*</span></label>
                        <div class="password-input">
                            <input type="text" id="studentId" name="studentId" class="form-input" placeholder="Enter your student ID">
                            <i class="fas fa-id-card input-icon"></i>
                        </div>
                        <div class="error-message" id="studentIdError">Student ID is required</div>
                    </div>

                    <div class="form-group">
                        <label for="studentPassword" class="form-label">Password <span>*</span></label>
                        <div class="password-input">
                            <input type="password" id="studentPassword" name="password" class="form-input" placeholder="Enter your password">
                            <button type="button" class="toggle-password" data-target="studentPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="studentPasswordError">Password is required</div>
                    </div>

                    <div class="form-options">
                        <div class="remember-me">
                            <input type="checkbox" id="rememberStudent" name="rememberStudent">
                            <label for="rememberStudent">Remember me</label>
                        </div>
                        <a href="forgot-password.html" class="forgot-password">Forgot Password?</a>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="studentLoginBtn">
                            Student Login <i class="fas fa-user-graduate"></i>
                        </button>
                    </div>

                    <div class="loading" id="studentLoading">
                        <div class="loading-spinner"></div>
                        Accessing student portal...
                    </div>
                </form>
            </div>

            <!-- Staff Login Form -->
            <div class="staff-login" id="staffLogin">
                <div class="form-header">
                    <h3>Staff Portal Access</h3>
                    <p>Secure login for lecturers and administrative staff</p>
                </div>

                <form id="staffLoginForm" class="login-form">
                    <div class="form-group">
                        <label for="staffEmail" class="form-label">Staff Email <span>*</span></label>
                        <div class="password-input">
                            <input type="email" id="staffEmail" name="email" class="form-input" placeholder="Enter staff email">
                            <i class="fas fa-envelope input-icon"></i>
                        </div>
                        <div class="error-message" id="staffEmailError">Staff email is required</div>
                    </div>

                    <div class="form-group">
                        <label for="staffPassword" class="form-label">Password <span>*</span></label>
                        <div class="password-input">
                            <input type="password" id="staffPassword" name="password" class="form-input" placeholder="Enter your password">
                            <button type="button" class="toggle-password" data-target="staffPassword">
                                <i class="fas fa-eye"></i>
                            </button>
                        </div>
                        <div class="error-message" id="staffPasswordError">Password is required</div>
                    </div>

                    <div class="form-group">
                        <label for="staffRole" class="form-label">Role <span>*</span></label>
                        <select id="staffRole" name="role" class="form-input">
                            <option value="">Select your role</option>
                            <option value="lecturer">Lecturer</option>
                            <option value="admin">Administrator</option>
                            <option value="support">Support Staff</option>
                            <option value="management">Management</option>
                        </select>
                        <div class="error-message" id="staffRoleError">Please select your role</div>
                    </div>

                    <div class="form-options">
                        <div class="remember-me">
                            <input type="checkbox" id="rememberStaff" name="rememberStaff">
                            <label for="rememberStaff">Remember this device</label>
                        </div>
                        <a href="forgot-password.html" class="forgot-password">Forgot Password?</a>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn-primary" id="staffLoginBtn">
                            Staff Login <i class="fas fa-chalkboard-teacher"></i>
                        </button>
                    </div>

                    <div class="loading" id="staffLoading">
                        <div class="loading-spinner"></div>
                        Accessing staff portal...
                    </div>
                </form>
            </div>

            <!-- Two-Factor Authentication Form -->
            <div class="two-factor-form" id="twoFactorForm">
                <h3>Two-Factor Authentication</h3>
                <p>Enter the verification code sent to your email</p>
                
                <div class="verification-code">
                    <input type="text" maxlength="1" class="code-input" data-index="1">
                    <input type="text" maxlength="1" class="code-input" data-index="2">
                    <input type="text" maxlength="1" class="code-input" data-index="3">
                    <input type="text" maxlength="1" class="code-input" data-index="4">
                    <input type="text" maxlength="1" class="code-input" data-index="5">
                    <input type="text" maxlength="1" class="code-input" data-index="6">
                </div>

                <div class="error-message" id="codeError">Invalid verification code</div>

                <div class="form-actions">
                    <button type="button" class="btn btn-primary" id="verifyCodeBtn">
                        Verify Code <i class="fas fa-check-circle"></i>
                    </button>
                    <button type="button" class="btn btn-secondary" id="backToLoginBtn">
                        <i class="fas fa-arrow-left"></i> Back to Login
                    </button>
                </div>

                <div class="resend-code" id="resendCode">
                    Didn't receive a code? <span>Resend Code</span>
                </div>
            </div>

            <!-- Social Login Options -->
            <div class="social-login">
                <div class="divider">
                    <span>Or continue with</span>
                </div>
                
                <div class="social-buttons">
                    <button type="button" class="btn btn-google" id="googleLoginBtn">
                        <i class="fab fa-google"></i> Google
                    </button>
                    <button type="button" class="btn btn-microsoft" id="microsoftLoginBtn">
                        <i class="fab fa-microsoft"></i> Microsoft
                    </button>
                </div>
            </div>

            <!-- Guest Access -->
            <div class="guest-access">
                <button type="button" class="guest-btn" id="guestLoginBtn">
                    <i class="fas fa-user-clock"></i> Continue as Guest (Limited Access)
                </button>
            </div>

            <!-- Register Link -->
            <div class="register-link">
                Don't have an account? <a href="register.html">Create one now</a>
            </div>

            <!-- Success Message -->
            <div class="success-message" id="successMessage">
                <div class="success-icon">
                    <i class="fas fa-check"></i>
                </div>
                <h2>Login Successful!</h2>
                <p id="welcomeMessage">Welcome back! Redirecting to your dashboard...</p>
                <div class="loading" id="redirectLoading">
                    <div class="loading-spinner"></div>
                    Redirecting...
                </div>
            </div>

            <!-- Security Tips -->
            <div class="security-tips">
                <h4><i class="fas fa-shield-alt"></i> Security Tips</h4>
                <p>• Never share your login credentials with anyone<br>
                   • Always log out when using shared computers<br>
                   • Ensure your password is strong and unique<br>
                   • Enable two-factor authentication for added security</p>
            </div>
        </div>
    </div>

    <script>
        // Main Login Script
        document.addEventListener('DOMContentLoaded', function() {
            // DOM Elements
            const loginTabs = document.querySelectorAll('.login-tab');
            const generalLogin = document.getElementById('generalLogin');
            const studentLogin = document.getElementById('studentLogin');
            const staffLogin = document.getElementById('staffLogin');
            const twoFactorForm = document.getElementById('twoFactorForm');
            const loginTitle = document.getElementById('loginTitle');
            const loginSubtitle = document.getElementById('loginSubtitle');
            const togglePasswordButtons = document.querySelectorAll('.toggle-password');
            const codeInputs = document.querySelectorAll('.code-input');
            const guestLoginBtn = document.getElementById('guestLoginBtn');
            const resendCodeBtn = document.getElementById('resendCode');
            const backToLoginBtn = document.getElementById('backToLoginBtn');
            const successMessage = document.getElementById('successMessage');
            const welcomeMessage = document.getElementById('welcomeMessage');

            // Current login state
            let currentLoginType = 'general';
            let loginData = {};

            // Tab Switching
            loginTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabType = this.getAttribute('data-tab');
                    
                    // Update active tab
                    loginTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Hide all forms
                    generalLogin.classList.remove('active');
                    studentLogin.style.display = 'none';
                    staffLogin.style.display = 'none';
                    twoFactorForm.style.display = 'none';
                    
                    // Show selected form
                    currentLoginType = tabType;
                    
                    switch(tabType) {
                        case 'general':
                            generalLogin.classList.add('active');
                            loginTitle.textContent = 'Sign In to Your Account';
                            loginSubtitle.textContent = 'Enter your credentials to access the platform';
                            break;
                        case 'student':
                            studentLogin.style.display = 'block';
                            studentLogin.classList.add('active');
                            loginTitle.textContent = 'Student Portal Login';
                            loginSubtitle.textContent = 'Access your courses, assignments, and grades';
                            break;
                        case 'staff':
                            staffLogin.style.display = 'block';
                            staffLogin.classList.add('active');
                            loginTitle.textContent = 'Staff Portal Login';
                            loginSubtitle.textContent = 'Secure access for lecturers and administrative staff';
                            break;
                    }
                });
            });

            // Toggle Password Visibility
            togglePasswordButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const targetId = this.getAttribute('data-target');
                    const input = document.getElementById(targetId);
                    const icon = this.querySelector('i');
                    
                    if (input.type === 'password') {
                        input.type = 'text';
                        icon.classList.remove('fa-eye');
                        icon.classList.add('fa-eye-slash');
                    } else {
                        input.type = 'password';
                        icon.classList.remove('fa-eye-slash');
                        icon.classList.add('fa-eye');
                    }
                });
            });

            // Form Validation Functions
            function validateEmail(email) {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            }

            function showError(inputId, errorId, message) {
                const input = document.getElementById(inputId);
                const error = document.getElementById(errorId);
                
                if (input) {
                    input.classList.add('error');
                    input.classList.remove('success');
                }
                
                if (error) {
                    error.textContent = message;
                    error.style.display = 'block';
                }
            }

            function clearError(inputId, errorId) {
                const input = document.getElementById(inputId);
                const error = document.getElementById(errorId);
                
                if (input) {
                    input.classList.remove('error');
                    input.classList.add('success');
                }
                
                if (error) {
                    error.style.display = 'none';
                }
            }

            function showLoading(formType) {
                const loading = document.getElementById(`${formType}Loading`);
                const submitBtn = document.getElementById(`${formType}LoginBtn`);
                
                if (loading) loading.style.display = 'block';
                if (submitBtn) submitBtn.style.display = 'none';
            }

            function hideLoading(formType) {
                const loading = document.getElementById(`${formType}Loading`);
                const submitBtn = document.getElementById(`${formType}LoginBtn`);
                
                if (loading) loading.style.display = 'none';
                if (submitBtn) submitBtn.style.display = 'flex';
            }

            // General Login Form
            const generalLoginForm = document.getElementById('generalLoginForm');
            if (generalLoginForm) {
                generalLoginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('generalEmail').value;
                    const password = document.getElementById('generalPassword').value;
                    let isValid = true;
                    
                    // Validate email
                    if (!email || !validateEmail(email)) {
                        showError('generalEmail', 'generalEmailError', 'Please enter a valid email address');
                        isValid = false;
                    } else {
                        clearError('generalEmail', 'generalEmailError');
                    }
                    
                    // Validate password
                    if (!password) {
                        showError('generalPassword', 'generalPasswordError', 'Password is required');
                        isValid = false;
                    } else {
                        clearError('generalPassword', 'generalPasswordError');
                    }
                    
                    if (isValid) {
                        loginData = { email, password, userType: 'general' };
                        await handleLogin('general');
                    }
                });
            }

            // Student Login Form
            const studentLoginForm = document.getElementById('studentLoginForm');
            if (studentLoginForm) {
                studentLoginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const studentId = document.getElementById('studentId').value;
                    const password = document.getElementById('studentPassword').value;
                    let isValid = true;
                    
                    // Validate student ID
                    if (!studentId) {
                        showError('studentId', 'studentIdError', 'Student ID is required');
                        isValid = false;
                    } else {
                        clearError('studentId', 'studentIdError');
                    }
                    
                    // Validate password
                    if (!password) {
                        showError('studentPassword', 'studentPasswordError', 'Password is required');
                        isValid = false;
                    } else {
                        clearError('studentPassword', 'studentPasswordError');
                    }
                    
                    if (isValid) {
                        loginData = { studentId, password, userType: 'student' };
                        await handleLogin('student');
                    }
                });
            }

            // Staff Login Form
            const staffLoginForm = document.getElementById('staffLoginForm');
            if (staffLoginForm) {
                staffLoginForm.addEventListener('submit', async function(e) {
                    e.preventDefault();
                    
                    const email = document.getElementById('staffEmail').value;
                    const password = document.getElementById('staffPassword').value;
                    const role = document.getElementById('staffRole').value;
                    let isValid = true;
                    
                    // Validate email
                    if (!email || !validateEmail(email)) {
                        showError('staffEmail', 'staffEmailError', 'Please enter a valid email address');
                        isValid = false;
                    } else {
                        clearError('staffEmail', 'staffEmailError');
                    }
                    
                    // Validate password
                    if (!password) {
                        showError('staffPassword', 'staffPasswordError', 'Password is required');
                        isValid = false;
                    } else {
                        clearError('staffPassword', 'staffPasswordError');
                    }
                    
                    // Validate role
                    if (!role) {
                        showError('staffRole', 'staffRoleError', 'Please select your role');
                        isValid = false;
                    } else {
                        clearError('staffRole', 'staffRoleError');
                    }
                    
                    if (isValid) {
                        loginData = { email, password, role, userType: 'staff' };
                        await handleLogin('staff');
                    }
                });
            }

            // Handle Login Process
            async function handleLogin(formType) {
                showLoading(formType);
                
                // Simulate API call delay
                await new Promise(resolve => setTimeout(resolve, 1500));
                
                // In a real application, you would:
                // 1. Send credentials to backend
                // 2. Handle response
                // 3. Check if 2FA is required
                // 4. Redirect to appropriate dashboard
                
                // For demo purposes, simulate random 2FA requirement
                const requires2FA = Math.random() > 0.7;
                
                if (requires2FA) {
                    // Show 2FA form
                    hideLoading(formType);
                    show2FAForm();
                } else {
                    // Show success and redirect
                    hideLoading(formType);
                    showSuccess();
                }
            }

            // Show 2FA Form
            function show2FAForm() {
                // Hide all forms
                generalLogin.style.display = 'none';
                studentLogin.style.display = 'none';
                staffLogin.style.display = 'none';
                
                // Show 2FA form
                twoFactorForm.style.display = 'block';
                
                // Focus first code input
                if (codeInputs.length > 0) {
                    codeInputs[0].focus();
                }
            }

            // Code Input Navigation
            codeInputs.forEach((input, index) => {
                input.addEventListener('input', function(e) {
                    const value = this.value;
                    
                    // Move to next input if value entered
                    if (value && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                    
                    // Check if all inputs are filled
                    const allFilled = Array.from(codeInputs).every(input => input.value);
                    if (allFilled) {
                        document.getElementById('verifyCodeBtn').focus();
                    }
                });
                
                input.addEventListener('keydown', function(e) {
                    // Handle backspace
                    if (e.key === 'Backspace' && !this.value && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                    
                    // Handle arrow keys
                    if (e.key === 'ArrowLeft' && index > 0) {
                        codeInputs[index - 1].focus();
                    }
                    if (e.key === 'ArrowRight' && index < codeInputs.length - 1) {
                        codeInputs[index + 1].focus();
                    }
                });
            });

            // Verify Code Button
            const verifyCodeBtn = document.getElementById('verifyCodeBtn');
            if (verifyCodeBtn) {
                verifyCodeBtn.addEventListener('click', async function() {
                    const code = Array.from(codeInputs).map(input => input.value).join('');
                    
                    // Validate code (in real app, this would be verified against backend)
                    if (code.length === 6 && /^\d+$/.test(code)) {
                        // Show loading
                        this.innerHTML = '<div class="loading-spinner" style="margin-right: 10px;"></div> Verifying...';
                        this.disabled = true;
                        
                        await new Promise(resolve => setTimeout(resolve, 1000));
                        
                        // Show success
                        showSuccess();
                    } else {
                        showError('codeError', 'codeError', 'Please enter a valid 6-digit code');
                    }
                });
            }

            // Resend Code
            if (resendCodeBtn) {
                resendCodeBtn.addEventListener('click', function() {
                    // In real app, this would call backend to resend code
                    alert('New verification code sent to your email!');
                    
                    // Clear inputs
                    codeInputs.forEach(input => input.value = '');
                    codeInputs[0].focus();
                });
            }

            // Back to Login Button
            if (backToLoginBtn) {
                backToLoginBtn.addEventListener('click', function() {
                    // Hide 2FA form
                    twoFactorForm.style.display = 'none';
                    
                    // Show appropriate login form
                    switch(currentLoginType) {
                        case 'general':
                            generalLogin.style.display = 'block';
                            break;
                        case 'student':
                            studentLogin.style.display = 'block';
                            break;
                        case 'staff':
                            staffLogin.style.display = 'block';
                            break;
                    }
                });
            }

            // Show Success Message
            function showSuccess() {
                // Hide all forms
                generalLogin.style.display = 'none';
                studentLogin.style.display = 'none';
                staffLogin.style.display = 'none';
                twoFactorForm.style.display = 'none';
                document.querySelector('.social-login').style.display = 'none';
                document.querySelector('.guest-access').style.display = 'none';
                document.querySelector('.register-link').style.display = 'none';
                document.querySelector('.security-tips').style.display = 'none';
                
                // Set welcome message based on user type
                let message = 'Welcome back! Redirecting to your dashboard...';
                let redirectUrl = 'index.html';
                
                switch(loginData.userType) {
                    case 'student':
                        message = `Welcome, Student! Redirecting to student portal...`;
                        redirectUrl = 'portal/student/index.html';
                        break;
                    case 'staff':
                        message = `Welcome, ${loginData.role || 'Staff'}! Redirecting to staff portal...`;
                        redirectUrl = 'portal/staff/index.html';
                        break;
                }
                
                welcomeMessage.textContent = message;
                successMessage.style.display = 'block';
                
                // Show redirect loading
                document.getElementById('redirectLoading').style.display = 'block';
                
                // Simulate redirect after 2 seconds
                setTimeout(() => {
                    // In real app, redirect to appropriate dashboard
                    window.location.href = redirectUrl;
                }, 2000);
            }

            // Guest Login
            if (guestLoginBtn) {
                guestLoginBtn.addEventListener('click', function() {
                    if (confirm('Continue as guest? You will have limited access to course materials and no access to assignments or grades.')) {
                        loginData = { userType: 'guest' };
                        showSuccess();
                    }
                });
            }

            // Social Login Buttons
            const googleLoginBtn = document.getElementById('googleLoginBtn');
            const microsoftLoginBtn = document.getElementById('microsoftLoginBtn');
            
            if (googleLoginBtn) {
                googleLoginBtn.addEventListener('click', function() {
                    alert('Google login would be implemented here. For demo, please use the form.');
                });
            }
            
            if (microsoftLoginBtn) {
                microsoftLoginBtn.addEventListener('click', function() {
                    alert('Microsoft login would be implemented here. For demo, please use the form.');
                });
            }

            // Auto-focus first input on tab switch
            loginTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    const tabType = this.getAttribute('data-tab');
                    setTimeout(() => {
                        switch(tabType) {
                            case 'general':
                                document.getElementById('generalEmail')?.focus();
                                break;
                            case 'student':
                                document.getElementById('studentId')?.focus();
                                break;
                            case 'staff':
                                document.getElementById('staffEmail')?.focus();
                                break;
                        }
                    }, 100);
                });
            });

            // Enter key to submit forms
            document.addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    const activeForm = document.querySelector('.login-content.active form') || 
                                     document.querySelector('.student-login.active form') || 
                                     document.querySelector('.staff-login.active form');
                    
                    if (activeForm) {
                        const submitBtn = activeForm.querySelector('button[type="submit"]');
                        if (submitBtn) {
                            submitBtn.click();
                        }
                    }
                }
            });
        });
    </script>
</body>
</html>
